var imgArray = [
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg",
	"../GalleryAssets/img/1406965068.jpg",
	"../GalleryAssets/img/1439358068.jpg",
	"../GalleryAssets/img/1443358068.jpg",
	"../GalleryAssets/img/1451415912.jpg",
	"../GalleryAssets/img/1451416904.jpg",
	"../GalleryAssets/img/1451431276.jpg",
	"../GalleryAssets/img/1451433043.jpg",
	"../GalleryAssets/img/1452034116.jpg",
	"../GalleryAssets/img/1464358068.jpg",
	"../GalleryAssets/img/1469328068.jpg",
	"../GalleryAssets/img/1469355068.jpg",
	"../GalleryAssets/img/1469358068.jpg",
	"../GalleryAssets/img/1469358168.jpg",
	"../GalleryAssets/img/1469358268.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469444877.jpg",
	"../GalleryAssets/img/1469654367.jpg",
	"../GalleryAssets/img/1469735732.jpg",
	"../GalleryAssets/img/1487358068.jpg"
];

var camera, scene, renderer;
var controls;

var objects = [];
var targets = { table: [], sphere: [], helix: [], grid: [] };

init();

function init() {

	camera = new THREE.PerspectiveCamera( 40, window.innerWidth / window.innerHeight, 1, 10000 );
	camera.position.z = 3000;

	scene = new THREE.Scene();

	for ( var i = 0; i < imgArray.length; i += 5 ) {

		var div = document.createElement( 'div' );
		div.className = 'pictureBox';
		div.style.backgroundImage = 'url("'+imgArray[i]+'")'

		var object = new THREE.CSS3DObject( div );
		scene.add( object );

		objects.push( object );

	}

	// sphere

	var vector = new THREE.Vector3();
	var spherical = new THREE.Spherical();

	for ( var i = 0, l = objects.length; i < l; i ++ ) {

		var phi = Math.acos( -1 + ( 2 * i ) / l );
		var theta = Math.sqrt( l * Math.PI ) * phi;

		var object = new THREE.Object3D();

		spherical.set( 800, phi, theta );

		object.position.setFromSpherical( spherical );

		targets.sphere.push( object );

	}

	//

	renderer = new THREE.CSS3DRenderer();
	renderer.setSize( window.innerWidth, window.innerHeight );
	renderer.domElement.style.position = 'absolute';
	document.getElementById( 'container' ).appendChild( renderer.domElement );

	//

	for (var i = objects.length - 1; i >= 0; i--) {
		setPos(objects[i], targets.sphere[i]);
	}

	//

	render();
	animate();

	window.addEventListener( 'resize', onWindowResize, false );

}

function setPos(obj, target) {
	obj.position.x = target.position.x;
	obj.position.y = target.position.y;
	obj.position.z = target.position.z;
	var vector = new THREE.Vector3();
	vector.copy(target.position).multiplyScalar( 3 );
	obj.lookAt(vector);
}

function onWindowResize() {

	camera.aspect = window.innerWidth / window.innerHeight;
	camera.updateProjectionMatrix();

	renderer.setSize( window.innerWidth, window.innerHeight );

	render();
	animate();

}

var clockwise = true;
var vx = 0;
var camAngle = 0;

function animate() {
	var target = new THREE.Vector3(0, 0, 0);
	camAngle += 0.004;
	if (camAngle > 2*Math.PI) camAngle = 0;
	if (clockwise) {
        camera.position.x = (3000 * Math.sin(-camAngle * vx));
        camera.position.z = (3000 * Math.cos(-camAngle * vx));
	} else {
        camera.position.x = (3000 * Math.sin(camAngle * vx));
        camera.position.z = (3000 * Math.cos(camAngle * vx));
	}
	camera.lookAt(target);

	render();
	requestAnimationFrame(animate);
}

function render() {
	renderer.render( scene, camera );
}

function mapN(value, min, max, newMin, newMax) {
	return (value - min) / (max - min) * (newMax - newMin) + newMin;
}

document.addEventListener("mousemove", function(e) {
	var minV = 0;
	var maxV = 10;
	if(e.screenX < window.innerWidth / 2) {
		clockwise = false;
		vx = mapN(e.screenX, 0, innerWidth / 2, maxV, minV);
	} else {
		clockwise = true;
		vx = mapN(e.screenX, innerWidth / 2, innerWidth, minV, maxV);
	}
});